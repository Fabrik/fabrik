var FbCalcList=new Class({options:{},Implements:[Events,Options],initialize:function(b,a){a.element=b;this.setOptions(a);this.col=$$("."+b);this.list=Fabrik.blocks[this.options.listRef];Fabrik.addEvent("fabrik.list.updaterows",function(){this.update()}.bind(this))},update:function(){var a={option:"com_fabrik",format:"raw",task:"plugin.pluginAjax",plugin:"calc",g:"element",listid:this.options.listid,formid:this.options.formid,method:"ajax_listUpdate",element_id:this.options.elid,rows:this.list.getRowIds(),elementname:this.options.elid};new Request.JSON({url:"",data:a,onError:function(c,b){fconsole("Fabrik:list-calc:update error:"+b,c)},onFailure:function(b){fconsole(b)},onSuccess:function(c){var d=Object.prototype.hasOwnProperty;for(var b in c){if(d.call(c,b)&&typeof c[b]==="string"){c[b]=Encoder.htmlDecode(c[b])}}$H(c).each(function(f,g){var e=this.list.list.getElement("#"+g+" ."+this.options.element);if(typeOf(e)!=="null"&&f!==false){e.set("html",f)}}.bind(this))}.bind(this)}).send()}});